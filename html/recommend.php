<?php
$dsn = "mysql:dbname=test_db;host=mysql;port=3306";
$user = "test_user";
$password = "test_password";

header("Access-Control-Allow-Origin: *");
header("Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS");
header("Access-Control-Allow-Headers: Content-Type, Access-Control-Allow-Headers, X-Requested-With");


try {
    // DBæ¥ç¶š
    $dbh = new PDO($dsn, $user, $password);

    // åˆæœŸãƒ‡ãƒ¼ã‚¿
    $sampleData = [
        [
            'comment' => 'æœ€é«˜ç´šãƒ¯ã‚¤ãƒ³ã®ç”£åœ°ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã‚‹ã€ãƒ•ãƒ©ãƒ³ã‚¹ã®ãƒ¡ãƒ‰ãƒƒã‚¯åœ°åŒºã§é€ ã‚‰ã‚ŒãŸãƒ•ãƒ«ãƒœãƒ‡ã‚£èµ¤ãƒ¯ã‚¤ãƒ³ã§ã™ã€‚ä¸–ç•Œçš„ã«æœ‰åãªã€Œã‚·ãƒ£ãƒˆãƒ¼ ãƒ©ãƒ•ã‚£ãƒƒãƒˆãƒ»ãƒ­ãƒ¼ãƒˆã‚·ãƒ«ãƒˆã€ã‚’é‹å–¶ã™ã‚‹ã€ãƒ­ã‚¹ãƒãƒ£ã‚¤ãƒ«ãƒ‰å®¶ãŒé†¸é€ ã—ã¦ã„ã¾ã™ã€‚ã‚«ãƒ™ãƒ«ãƒãƒ»ã‚½ãƒ¼ãƒ´ã‚£ãƒ‹ãƒ¨ãƒ³ã¨ãƒ¡ãƒ«ãƒ­ãƒ¼ãŒãƒ–ãƒ¬ãƒ³ãƒ‰ã•ã‚Œã€åŠ›å¼·ã„é£²ã¿å£ã¨ã€ãã‚ç´°ã‚„ã‹ã§ã—ã£ã‹ã‚Šã¨ã—ãŸæœå®Ÿå‘³ãŒç‰¹å¾´ã§ã™ã€‚ä½¿ã‚ã‚Œã¦ã„ã‚‹ãƒ–ãƒ‰ã‚¦ã®ä¸€éƒ¨ã¯ã€ç¬¬1ç´šã®æ ¼ä»˜ã‘ã®ãƒ©ãƒ•ã‚£ãƒƒãƒˆãƒ»ãƒ­ãƒ¼ãƒˆã‚·ãƒ«ãƒˆã§åç©«ã•ã‚ŒãŸãƒ¢ãƒã€‚ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆã§é«˜ç´šæ„Ÿã®ã‚ã‚‹å‘³ã‚ã„ã®èµ¤ãƒ¯ã‚¤ãƒ³ãŒ5000å††ä»¥ä¸‹ã§æ¥½ã—ã‚ã‚‹ã€ã‚³ã‚¹ãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®é«˜ã•ã‚‚ãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚',
            'wine_name' => 'ãƒ‰ãƒ¡ãƒ¼ãƒŒ ãƒãƒ­ãƒ³ ãƒ‰ ãƒ­ãƒ¼ãƒˆã‚·ãƒ«ãƒˆ ãƒãƒ¼ã‚¤ãƒ¤ãƒƒã‚¯ ãƒ¬ã‚¼ãƒ«ãƒ–',
            'winery' => 'ãƒ–ãƒ«ã‚´ãƒ¼ãƒ‹ãƒ¥',
            'wine_type' => 'èµ¤ãƒ¯ã‚¤ãƒ³',
            'wine_image' => 'https://m.media-amazon.com/images/I/51oIGuJ2aFL.__AC_SX342_SY445_QL70_ML2_.jpg',
            'wine_country' => 'ğŸ‡«ğŸ‡· ãƒ•ãƒ©ãƒ³ã‚¹',
            'wine_url' => 'https://www.amazon.co.jp/dp/B00ISJ9DVC?ots=1&tag=s02a3-22&th=1',
            'one_word' => 'åŠ›å¼·ã„é£²ã¿å£ã¨ãã‚ç´°ã‚„ã‹ã§ã—ã£ã‹ã‚Šã¨ã—ãŸæœå®Ÿå‘³',
            'english_wine_name' => 'Domane Barons de Rothschild',
            'years' => '2020',
            'producer' => 'ãƒ­ã‚¹ãƒãƒ£ã‚¤ãƒ«ãƒ‰å®¶',
            'breed' => 'ã‚«ãƒ™ãƒ«ãƒãƒ»ã‚½ãƒ¼ãƒ´ã‚£ãƒ‹ãƒ¨ãƒ³ã€ãƒ¡ãƒ«ãƒ­ãƒ¼',
            'capacity' => 750
        ],
        [
            'comment' => 'åé–€ãƒ–ãƒ†ã‚¤ã‚¨å®¶ãŒæ‰€æœ‰ã—ã€ãŠå€¤æ‰“ã¡ãªãƒœãƒ«ãƒ‰ãƒ¼ãƒ¯ã‚¤ãƒ³ã¨ã—ã¦ç¢ºå›ºãŸã‚‹åœ°ä½ã‚’ç¯‰ãã‚·ãƒ£ãƒˆãƒ¼ã€‚ãƒ¯ã‚¤ãƒ³è©•è«–å®¶ãƒ­ãƒãƒ¼ãƒˆãƒ»ãƒ‘ãƒ¼ã‚«ãƒ¼æ°ã‚‚ã€Œãƒ¡ãƒ‰ãƒƒã‚¯ã®ãƒ¯ã‚¤ãƒ³æ ¼ä»˜ã‘ã‚’ã‚„ã‚Šç›´ã›ã°ã€ãŠãã‚‰ãæ ¼ä»˜ã‘ç¬¬äº”ç´šã®åœ°ä½ãŒçœŸå‰£ã«æ¤œè¨ã•ã‚Œã‚‹ãƒ¯ã‚¤ãƒ³ã§ã‚ã‚‹ã€ã¨å¤§çµ¶è³›ã—ã¦ã„ã¾ã™ã€‚å‡ç¸®ã—ãŸæœå®Ÿå‘³ã¨æ»‘ã‚‰ã‹ãªã‚¿ãƒ³ãƒ‹ãƒ³ãŒèª¿å’Œã—ãŸå‘³ã‚ã„ã§ã™ã€‚',
            'wine_name' => 'ã‚·ãƒ£ãƒˆãƒ¼ãƒ»ãƒ©ãƒãƒƒã‚µãƒ³',
            'winery' => 'ãƒ–ãƒ«ã‚´ãƒ¼ãƒ‹ãƒ¥',
            'wine_type' => 'èµ¤ãƒ¯ã‚¤ãƒ³',
            'wine_image' => 'https://enoteca.imagewave.pictures/R7c7J1v7R/bottle-500',
            'wine_country' => 'ğŸ‡«ğŸ‡· ãƒ•ãƒ©ãƒ³ã‚¹',
            'wine_url' => 'https://www.enoteca.co.jp/item/detail/010050861',
            'one_word' => 'ã‚ã®ãƒ­ãƒãƒ¼ãƒˆãƒ»ãƒ‘ãƒ¼ã‚«ãƒ¼æ°ã®ãŠæ°—ã«å…¥ã‚Šã‚·ãƒ£ãƒˆãƒ¼ã€‚æ ¼ä»˜ã‘ã‚·ãƒ£ãƒˆãƒ¼ã«åŒ¹æ•µã™ã‚‹ã‚¯ã‚ªãƒªãƒ†ã‚£ã‚’å‚™ãˆãŸã€ãŠå€¤æ‰“ã¡ãƒœãƒ«ãƒ‰ãƒ¼ãƒ¯ã‚¤ãƒ³ã€‚',
            'english_wine_name' => 'CH.LANESSAN',
            'years' => '2013',
            'producer' => 'CH.LANESSAN ã‚·ãƒ£ãƒˆãƒ¼ãƒ»ãƒ©ãƒãƒƒã‚µãƒ³',
            'breed' => 'ã‚«ãƒ™ãƒ«ãƒãƒ»ã‚½ãƒ¼ãƒ´ã‚£ãƒ‹ãƒ¨ãƒ³ã€ãƒ¡ãƒ«ãƒ­ãƒ¼ã€ãƒ—ãƒ†ã‚£ãƒ»ãƒ´ã‚§ãƒ«ãƒ‰',
            'capacity' => 750
        ],
        [
            'comment' => 'ã“ã®ãƒ¯ã‚¤ãƒ³ã¯ã€ã€Œã‚³ãƒ¼ãƒˆãƒ»ãƒ‰ãƒ¼ãƒ«ã€ã¨ã€Œã‚³ãƒ¼ãƒˆãƒ»ã‚·ãƒ£ãƒ­ãƒãƒ¼ã‚ºã€ã®ãƒ´ã‚£ãƒ©ãƒ¼ã‚¸ãƒ¥ç´šã®ç•‘ã®é¸ã°ã‚ŒãŸãƒ–ãƒ‰ã‚¦ã‹ã‚‰é€ ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ã‚¸ãƒ£ãƒ‰ãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ã‚’åæ˜ ã—ã¦ã€ãµãã‚ˆã‹ãªãƒ•ãƒ«ãƒ¼ãƒ„ã‚‰ã—ã•ã¨çµ¹ã®ã‚ˆã†ãªèˆŒè§¦ã‚Šã¨å„ªã—ã„ã‚¿ãƒ³ãƒ‹ãƒ³ã‚’æŒã£ãŸã€ç©ã‚„ã‹ã§èª¿å’Œã®å–ã‚ŒãŸé¦™å‘³ã«ä»•ä¸ŠãŒã£ã¦ã„ã¾ã™ã€‚è‹¥ã„ã¨ãã«ã¯èµ¤ã„æœå®Ÿã®ãƒ•ãƒ«ãƒ¼ãƒ†ã‚£ã•ã‚’ç™ºæ®ã—ã€æ™‚é–“ã¨ã¨ã‚‚ã«ã€æ£®ã®æ¯ã‚Œè‘‰ã®é¦™ã‚Šã‚„ã€ã‚¹ãƒ‘ã‚¤ã‚·ãƒ¼ã•ãªã©ã€ã‚ˆã‚Šç†Ÿæˆã—ãŸé¦™ã‚Šã§æ¥½ã—ã¾ã›ã¦ãã‚Œã¾ã™ã€‚ãƒ–ãƒ¬ãƒ³ãƒ‰ã«ç”¨ã„ã‚‰ã‚Œã‚‹ã‚³ãƒ¼ãƒˆãƒ»ãƒ‰ãƒ»ãƒ‹ãƒ¥ã‚¤ã®ãƒ¯ã‚¤ãƒ³ã¯æ·±ã¿ã®ã‚ã‚‹ã‚¿ãƒ³ãƒ‹ãƒ³ã‚’ã‚‚ãŸã‚‰ã—ã€ã‚³ãƒ¼ãƒˆãƒ»ãƒ‰ãƒ»ãƒœãƒ¼ãƒŒã®ãƒ¯ã‚¤ãƒ³ã¯æœå®Ÿå‘³ã‚’ä¸ãˆã¾ã™ã€‚ãƒ”ãƒãƒ»ãƒãƒ¯ãƒ¼ãƒ«å“ç¨®ã®å€‹æ€§ã‚’éå¸¸ã«è‰¯ãã‚ã‚‰ã‚ã—ãŸãƒ¯ã‚¤ãƒ³ã§ã™ã€‚',
            'wine_name' => 'ãƒ«ã‚¤ãƒ»ã‚¸ãƒ£ãƒ‰ ãƒ–ãƒ«ã‚´ãƒ¼ãƒ‹ãƒ¥ ãƒ”ãƒãƒ»ãƒãƒ¯ãƒ¼ãƒ«',
            'winery' => 'ãƒ–ãƒ«ã‚´ãƒ¼ãƒ‹ãƒ¥',
            'wine_type' => 'èµ¤ãƒ¯ã‚¤ãƒ³',
            'wine_image' => 'https://m.media-amazon.com/images/I/61BRhtCmYqL.__AC_SX342_SY445_QL70_ML2_.jpg',
            'wine_country' => 'ğŸ‡«ğŸ‡· ãƒ•ãƒ©ãƒ³ã‚¹',
            'wine_url' => 'https://www.amazon.co.jp/dp/B002JN2US6?tag=greatwine-22&linkCode=ogi&th=1&psc=1',
            'one_word' => 'ãƒ©ã‚ºãƒ™ãƒªãƒ¼ã®ã‚ˆã†ãªæœå®Ÿå‘³ã¨ã‚·ãƒ«ã‚¯ã®ã‚ˆã†ãªèˆŒè§¦ã‚ŠãŒå¿ƒåœ°ã‚ˆã„ãƒ¯ã‚¤ãƒ³',
            'english_wine_name' => 'LOUIS JADOT',
            'years' => '2020',
            'producer' => 'ãƒ«ã‚¤ãƒ»ã‚¸ãƒ£ãƒ‰ç¤¾',
            'breed' => 'ãƒ”ãƒãƒ»ãƒãƒ¯ãƒ¼ãƒ«100',
            'capacity' => 750
        ],
        [
            'comment' => 'ãƒ–ãƒ©ã‚¦ãƒ³ãƒ»ãƒ–ãƒ©ã‚¶ãƒ¼ã‚ºã¯ã€1889å¹´ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢ã®ãƒ“ã‚¯ãƒˆãƒªã‚¢å·ã«å‰µç«‹ã—ãŸå›½å†…ã§æœ€ã‚‚å¤ã„å®¶æ—çµŒå–¶ã®ãƒ¯ã‚¤ãƒŠãƒªãƒ¼ã®1ã¤ã§ã™ã€‚åŸæ–™ã¨ãªã£ã¦ã„ã‚‹ã‚¿ãƒ©ãƒ³ã‚´ç¨®ã¯ã€ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢ã®CSIRO(ç§‘å­¦ç”£æ¥­ç ”ç©¶æ©Ÿæ§‹)ã®ç§‘å­¦è€…ãŒ1965å¹´ã«é–‹ç™ºã—ãŸãƒ–ãƒ‰ã‚¦å“ç¨®ã§ã™ã€‚ãƒ–ãƒ©ã‚¦ãƒ³ãƒ»ãƒ–ãƒ©ã‚¶ãƒ¼ã‚ºç¤¾ã¯1980å¹´ã«ã‚¿ãƒ©ãƒ³ã‚´å“ç¨®ã‹ã‚‰ãƒ¯ã‚¤ãƒ³ã‚’é€ ã‚Šå§‹ã‚ã¾ã—ãŸãŒã€è¿‘å¹´ãƒ•ãƒ©ãƒ³ã‚¹ã®ãƒœãƒ¼ã‚¸ãƒ§ãƒ¬ã¨åŒæ§˜ã®ãƒã‚»ãƒ©ã‚·ã‚ªãƒ³ãƒ»ã‚«ãƒ«ãƒœãƒ‹ãƒƒã‚¯è£½æ³•ã‚’å°å…¥ã—ã¦ã„ã¾ã™ã€‚ç”Ÿãç”Ÿãã¨ã—ãŸãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãªæœå®Ÿã€ã‚¸ãƒ£ãƒ ã‚„ç ‚ç³–ä»˜ã‘ã®èµ¤æœå®Ÿã®ã‚ˆã†ãªé¦™ã‚Šã€‚ã¾ã‚ã‚„ã‹ã§ã‚­ãƒ¡ã®ç´°ã‹ã„æ§ãˆã‚ãªã‚¿ãƒ³ãƒ‹ãƒ³åˆ†(æ¸‹å‘³)ã€‚é…¸å‘³ã¨ç”˜å‘³ã®ãƒãƒ©ãƒ³ã‚¹ã‚‚è‰¯ãã€ã‚¸ãƒ¥ãƒ¼ã‚·ãƒ¼ãªå‘³ã‚ã„ã€‚å°‘ã—å†·ã‚„ã—ã¦ã„ãŸã ã„ã¦ã‚‚æ¥½ã—ã‚ã¾ã™ã€‚',
            'wine_name' => 'ãƒ–ãƒ©ã‚¦ãƒ³ãƒ–ãƒ©ã‚¶ãƒ¼ã‚¹ ã‚¿ãƒ©ãƒ³ã‚´',
            'winery' => 'ãƒ“ã‚¯ãƒˆãƒªã‚¢',
            'wine_type' => 'èµ¤ãƒ¯ã‚¤ãƒ³',
            'wine_image' => 'https://m.media-amazon.com/images/I/71GlnsAM1VL.__AC_SX342_SY445_QL70_ML2_.jpg',
            'wine_country' => 'ğŸ‡¦ğŸ‡º ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢',
            'wine_url' => 'https://www.amazon.co.jp/%E3%83%96%E3%83%A9%E3%82%A6%E3%83%B3%E3%83%96%E3%83%A9%E3%82%B6%E3%83%BC%E3%82%BA-%E3%82%BF%E3%83%A9%E3%83%B3%E3%82%B4-%E3%83%A9%E3%82%A4%E3%83%88%E3%83%9C%E3%83%87%E3%82%A3-%E3%82%AA%E3%83%BC%E3%82%B9%E3%83%88%E3%83%A9%E3%83%AA%E3%82%A2-750ml/dp/B005YTGF3I/ref=sr_1_2?__mk_ja_JP=%E3%82%AB%E3%82%BF%E3%82%AB%E3%83%8A&keywords=%E3%83%96%E3%83%A9%E3%82%A6%E3%83%B3%E3%83%96%E3%83%A9%E3%82%B6%E3%83%BC%E3%82%BA+%E3%82%BF%E3%83%A9%E3%82%B4&linkCode=ll2&qid=1665470721&qu=eyJxc2MiOiIwLjU5IiwicXNhIjoiMC4wMCIsInFzcCI6IjAuMDAifQ%3D%3D&sr=8-2',
            'one_word' => 'ãƒœã‚¸ãƒ§ãƒ¬ãƒ¼ãƒŒãƒ¼ãƒœãƒ¼ã®ã‚ˆã†ãªã€é…¸å‘³ãŒæŸ”ã‚‰ã‹ãã¦ãƒ•ãƒ«ãƒ¼ãƒ†ã‚£ãªé¦™ã‚Šã®ãƒ©ã‚¤ãƒˆãƒœãƒ‡ã‚£',
            'english_wine_name' => '',
            'years' => '',
            'producer' => '',
            'breed' => 'ã‚¿ãƒ©ãƒ³ã‚´90%ã€ãƒ¡ãƒ«ãƒ­ãƒ¼10%',
            'capacity' => 750
        ],
        [
            'comment' => 'ã‚ªãƒãƒå…ƒå¤§çµ±é ˜ã‚‚ãŠæ°—ã«å…¥ã‚Šã®ãƒ¯ã‚¤ãƒ³ã¨ã—ã¦ãã®åå‰ã‚’æŒ™ã’ã‚‹ã€ã‚«ãƒªãƒ•ã‚©ãƒ«ãƒ‹ã‚¢å±ˆæŒ‡ã®ãƒ¯ã‚¤ãƒŠãƒªãƒ¼ã€‚ã‚°ãƒ©ãƒ³ãƒ‰ãƒ»ãƒªã‚¶ãƒ¼ãƒ´ã¯ã€æ‰€æœ‰ã™ã‚‹æ§˜ã€…ãªç•‘ã‚’å³æ ¼ã«åŒºåˆ†ã—ã¦æ ½åŸ¹ã—ãŸãƒ–ãƒ‰ã‚¦ã‚’ã€ãƒ–ãƒ¬ãƒ³ãƒ‰ã—ã¦ä»•ç«‹ã¦ã‚‹ä¸Šç´šã‚·ãƒªãƒ¼ã‚ºã€‚ãƒˆãƒ­ãƒ”ã‚«ãƒ«ãƒ•ãƒ«ãƒ¼ãƒ„ã®æ¿ƒåšãªã‚¢ãƒ­ãƒã€ãƒã‚¿ãƒ¼ã‚„ãƒŠãƒƒãƒ„ã®ã‚³ã‚¯ã¨ã»ã®ã‹ãªãƒŸãƒãƒ©ãƒ«ãŒæ„Ÿã˜ã‚‰ã‚Œã‚‹ãƒªãƒƒãƒãªå‘³ã‚ã„ã§ã™ã€‚',
            'wine_name' => 'ã‚±ãƒ³ãƒ€ãƒ«ãƒ»ã‚¸ãƒ£ã‚¯ã‚½ãƒ³ ã‚°ãƒ©ãƒ³ãƒ‰ãƒ»ãƒªã‚¶ãƒ¼ãƒ´ ã‚·ãƒ£ãƒ«ãƒ‰ãƒ',
            'winery' => 'ã‚«ãƒªãƒ•ã‚©ãƒ«ãƒ‹ã‚¢',
            'wine_type' => 'ç™½ãƒ¯ã‚¤ãƒ³',
            'wine_image' => 'https://m.media-amazon.com/images/I/61B2F4S0WfL._AC_SX679_.jpg',
            'wine_country' => 'ğŸ‡ºğŸ‡¸ ã‚¢ãƒ¡ãƒªã‚«åˆè¡†å›½',
            'wine_url' => 'https://www.amazon.co.jp/%E3%82%B1%E3%83%B3%E3%83%80%E3%83%AB%E3%82%B8%E3%83%A3%E3%82%AF%E3%82%BD%E3%83%B3-081584013082-%E3%82%B1%E3%83%B3%E3%83%80%E3%83%AB%E3%83%BB%E3%82%B8%E3%83%A3%E3%82%AF%E3%82%BD%E3%83%B3-%E3%82%B0%E3%83%A9%E3%83%B3%E3%83%89%E3%83%BB%E3%83%AA%E3%82%B6%E3%83%BC%E3%83%B4-%E3%82%B7%E3%83%A3%E3%83%AB%E3%83%89%E3%83%8D/dp/B0016H3A3U',
            'one_word' => 'ã‚¢ãƒ¡ãƒªã‚«å±ˆæŒ‡ã®ãƒ¯ã‚¤ãƒŠãƒªãƒ¼ãŒé€ ã‚‹ã€ã¾ã•ã«ã‚³ã‚¯ãŒæ„Ÿã˜ã‚‰ã‚Œã‚‹ã‚·ãƒ£ãƒ«ãƒ‰ãƒã§ã™ã€‚ã¾ã‚‹ã§ãƒã‚¿ãƒ¼ã‚„ã‚ªã‚¤ãƒ«ã®ã‚ˆã†ãªãƒªãƒƒãƒãªå£å½“ãŸã‚Š',
            'english_wine_name' => '',
            'years' => '2020',
            'producer' => 'ã‚¨ãƒãƒ†ã‚«',
            'breed' => 'ã‚·ãƒ£ãƒ«ãƒ‰ãƒ, ãƒ”ãƒãƒ»ãƒ ãƒ‹ã‚¨',
            'capacity' => 750
        ],
        [
            'comment' => 'å—ãƒ•ãƒ©ãƒ³ã‚¹ã®ãƒ­ãƒ¼ãƒŒå…¨åŸŸã§åœ§å·»ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ‰‹æ›ã‘ã‚‹ã€Œãƒ­ãƒ¼ãƒŒã§æœ€ã‚‚å„ªã‚ŒãŸãƒã‚´ã‚·ã‚¢ãƒ³ã€ã‚¿ãƒ«ãƒ‡ãƒ¥ãƒ¼ãƒ»ãƒ­ãƒ¼ãƒ©ãƒ³ã€‚ã“ã¡ã‚‰ã¯ã€å½“ä¸»ã®ãƒŸãƒƒã‚·ã‚§ãƒ«ãƒ»ãƒ€ãƒ«ãƒ‡ãƒ¥ãƒ¼æ°ã®çˆ¶ã‚®ã‚£ã¨å”çˆ¶ãƒ«ã‚¤ã¸ã®ã‚ªãƒãƒ¼ã‚¸ãƒ¥ãƒ¯ã‚¤ãƒ³ã€‚ã‚¿ãƒ«ãƒ‡ãƒ¥ãƒ¼æ°æ›°ãã€ã€Œéå¸¸ã«é«˜ã„ãƒ¬ãƒ™ãƒ«ã®ãƒãƒ©ãƒ³ã‚¹ã‚’å‚™ãˆã¦ãŠã‚Šã€ç†ŸæˆãŒå¯èƒ½ã€ã¨ã®ã“ã¨ã€‚ã‚¯ãƒªãƒ¼ãƒ ã‚·ãƒãƒ¥ãƒ¼ã®ã‚ˆã†ãªæ¿ƒã„å‘³ä»˜ã‘ã®æ–™ç†ã¯ã‚‚ã¡ã‚ã‚“ã€ã—ã£ã‹ã‚Šå†·ã‚„ã—ã¦ã‚¹ãƒ‘ã‚¤ã‚·ãƒ¼ãªã‚¨ã‚¹ãƒ‹ãƒƒã‚¯æ–™ç†ã¨ä¸€ç·’ã«æ„‰ã—ã‚€ã®ã‚‚ãŠã‚¹ã‚¹ãƒ¡ã§ã™ã€‚',
            'wine_name' => 'ã‚³ãƒ¼ãƒˆãƒ»ãƒ‡ãƒ¥ãƒ»ãƒ­ãƒ¼ãƒŒ ã‚®ã‚£ãƒ»ãƒ«ã‚¤ãƒ»ãƒ–ãƒ©ãƒ³',
            'winery' => 'ã‚³ãƒ¼ãƒˆãƒ»ãƒ‡ãƒ¥ãƒ»ãƒ­ãƒ¼ãƒŒ',
            'wine_type' => 'ç™½ãƒ¯ã‚¤ãƒ³',
            'wine_image' => 'https://m.media-amazon.com/images/I/31YdGDgSHaL.__AC_SX342_SY445_QL70_ML2_.jpg',
            'wine_country' => 'ğŸ‡«ğŸ‡· ãƒ•ãƒ©ãƒ³ã‚¹',
            'wine_url' => 'https://www.amazon.co.jp/Cotes-Rhone-Blanc-%E3%82%A2%E3%83%B3%E3%83%89%E3%83%AC%E3%83%BB%E3%83%96%E3%83%AB%E3%83%8D%E3%83%AB-750ml/dp/B01M5DR5GB/ref=sr_1_1_sspa?adgrpid=68107259489&gclid=CjwKCAjwqJSaBhBUEiwAg5W9p14VeHLxEu8J7kx24_P-vTeP8GqvAcLefz7O-xbK9d6NMHgPxPxfrhoCoyAQAvD_BwE&hvadid=618688899329&hvdev=c&hvlocphy=1009637&hvnetw=g&hvqmt=b&hvrand=9018288264539753818&hvtargid=kwd-300396788321&hydadcr=1941_13539232&jp-ad-ap=0&keywords=%E3%82%B3%E3%83%BC%E3%83%88+%E3%83%87%E3%83%A5+%E3%83%AD%E3%83%BC%E3%83%8C+%E3%83%96%E3%83%A9%E3%83%B3&qid=1665478029&qu=eyJxc2MiOiIwLjAwIiwicXNhIjoiMC4wMCIsInFzcCI6IjAuMDAifQ%3D%3D&sr=8-1-spons&psc=1&spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUExSDJDNE5US0FXSzlRJmVuY3J5cHRlZElkPUEwNDg4NDkxV1g5UDFUMFUxSUU3JmVuY3J5cHRlZEFkSWQ9QTEyQ0hQRlRGUkNXTVcmd2lkZ2V0TmFtZT1zcF9hdGYmYWN0aW9uPWNsaWNrUmVkaXJlY3QmZG9Ob3RMb2dDbGljaz10cnVl',
            'one_word' => 'å—åŒ—ãƒ­ãƒ¼ãƒŒã®ãƒ–ãƒ‰ã‚¦ã‚’ãƒ–ãƒ¬ãƒ³ãƒ‰ã—ã¦é€ ã‚‰ã‚Œã‚‹ã€å—ä»ã‚‰ã—ã„è±Šã‹ãªã‚¢ãƒ­ãƒã¨æœå®Ÿå‘³ãŒæº¢ã‚ŒãŸç™½ãƒ¯ã‚¤ãƒ³',
            'english_wine_name' => 'Cotes du Rhone Blanc la Becassonne',
            'years' => '2018',
            'producer' => 'ã‚¢ãƒ³ãƒ‰ãƒ¬ ãƒ–ãƒ«ãƒãƒ«',
            'breed' => 'ãƒ«ãƒ¼ã‚µãƒ³ãƒŒ50ï¼…ã€ã‚°ãƒ«ãƒŠãƒƒã‚·ãƒ¥ ãƒ–ãƒ©ãƒ³30ï¼…ã€ã‚¯ãƒ¬ãƒ¬ãƒƒãƒˆ20ï¼…',
            'capacity' => 750
        ],
        [
            'comment' => 'å¤šãã®è©•è«–å®¶ãƒ»è©•ä¾¡èªŒã‹ã‚‰é«˜è©•ä¾¡ã‚’ç²å¾—ã—ã€è¦‹ã¤ã‘ãŸã‚‰ã™ãã«è²·ã†ã¹ãé€ ã‚Šæ‰‹ã¨è©•ã•ã‚Œã‚‹ç”Ÿç”£è€…ã€‚èµ¤ãƒ¯ã‚¤ãƒ³ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒå¼·ã„å½¼ã‚‰ã§ã™ãŒã€ç™½ãƒ¯ã‚¤ãƒ³ã‚‚éå¸¸ã«é«˜å“è³ªã€‚ã“ã¡ã‚‰ã¯ã‚¢ãƒªã‚´ãƒ†ãªã‚‰ã§ã¯ã®é…¸ã‚’è¡¨ç¾ã—ã¤ã¤ã€å¿ƒåœ°ã‚ˆã„ãƒœãƒªãƒ¥ãƒ¼ãƒ æ„Ÿã®ã‚ã‚‹ä»•ä¸ŠãŒã‚Šã§ã™',
            'wine_name' => 'ãƒ–ãƒ«ã‚´ãƒ¼ãƒ‹ãƒ¥ãƒ»ã‚¢ãƒªã‚´ãƒ†',
            'winery' => 'ãƒ–ãƒ«ã‚´ãƒ¼ãƒ‹ãƒ¥',
            'wine_type' => 'ç™½ãƒ¯ã‚¤ãƒ³',
            'wine_image' => 'https://m.media-amazon.com/images/I/51+-AjtNzVL._AC_SX342_SY445_.jpg',
            'wine_country' => 'ğŸ‡«ğŸ‡· ãƒ•ãƒ©ãƒ³ã‚¹',
            'wine_url' => 'https://www.amazon.co.jp/%E3%83%96%E3%83%AB%E3%82%B4%E3%83%BC%E3%83%8B%E3%83%A5-%E3%82%A2%E3%83%AA%E3%82%B4%E3%83%86-750ml-%E3%82%AA%E3%83%BC%E3%82%AC%E3%83%8B%E3%83%83%E3%82%AF-%E3%83%AF%E3%82%A4%E3%83%B3/dp/B007X3OGD4',
            'one_word' => 'æŸ‘æ©˜ç³»æœå®Ÿã‚’æ€ã‚ã›ã‚‹é…¸å‘³ã‚’ä¼´ã£ãŸãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã‹ã¤çˆ½ã‚„ã‹ãªæœå®Ÿå‘³ã¨ã€ãƒŸãƒãƒ©ãƒ«æ„ŸãŒé­…åŠ›',
            'english_wine_name' => '',
            'years' => '2020',
            'producer' => 'ãƒšãƒ«ãƒã‚¨å®¶',
            'breed' => 'ã‚¢ãƒªã‚´ãƒ†',
            'capacity' => 750
        ],
        [
            'comment' => 'ãƒ—ãƒ«ãƒãƒƒãƒˆã¯ã€ã‚¤ã‚¿ãƒªã‚¢å±ˆæŒ‡ã®ãƒ¯ã‚¤ãƒ³ç”£åœ°ã€ãƒ”ã‚¨ãƒ¢ãƒ³ãƒ†å·ã§100 å¹´ä»¥ä¸Šç¶šãè€èˆ—ãƒ¯ã‚¤ãƒŠãƒªãƒ¼ã€‚ã“ã¡ã‚‰ã¯ã€ãƒ”ã‚¨ãƒ¢ãƒ³ãƒ†ã‚’ä»£è¡¨ã™ã‚‹ç™½ãƒ¯ã‚¤ãƒ³ã®åœŸç€å“ç¨®ã‚¢ãƒ«ãƒã‚¤ã‚¹ã§é€ ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚å¾¹åº•ã—ã¦ä½æ¸©ã‚’ä¿ã¤ã“ã¨ã§å¼•ãå‡ºã™ã€ãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãªã‚¢ãƒ­ãƒã¨ã‚³ã‚¯ã®ã‚ã‚‹å‘³ã‚ã„ãŒç‰¹å¾´ã§ã€æ§˜ã€…ãªãŠé£Ÿäº‹ã¨åˆã‚ã›ã¦é ‚ã‘ã‚‹ä»•ä¸ŠãŒã‚Šã§ã™ã€‚',
            'wine_name' => 'ãƒ­ã‚¨ãƒ­ãƒ»ã‚¢ãƒ«ãƒã‚¤ã‚¹',
            'winery' => 'ãƒ–ãƒ«ã‚´ãƒ¼ãƒ‹ãƒ¥',
            'wine_type' => 'ç™½ãƒ¯ã‚¤ãƒ³',
            'wine_image' => 'https://m.media-amazon.com/images/I/31LtvgchMpL.__AC_SY445_SX342_QL70_ML2_.jpg',
            'wine_country' => 'ğŸ‡®ğŸ‡¹ ã‚¤ã‚¿ãƒªã‚¢',
            'wine_url' => 'https://www.amazon.co.jp/%E3%83%AD%E3%82%A8%E3%83%AD%E3%83%BB%E3%82%A2%E3%83%AB%E3%83%8D%E3%82%A4%E3%82%B9%E3%83%BB%E3%83%B4%E3%82%A3%E3%83%83%E3%83%A9%E3%83%BC%E3%82%BF-%E3%83%B4%E3%82%A3%E3%83%BC%E3%83%86%E3%83%BB%E3%82%B3%E3%83%AB%E3%83%86-2020%E5%B9%B4-%E3%83%94%E3%82%A8%E3%83%A2%E3%83%B3%E3%83%86-750ml/dp/B09QCLFQCF',
            'one_word' => 'ãƒãƒ­ãƒ¼ãƒ­ã€ãƒãƒ«ãƒãƒ¬ã‚¹ã‚³ã®åé–€ãŒæ‰‹æ›ã‘ã‚‹ãƒ”ã‚¨ãƒ¢ãƒ³ãƒ†æœ€ä¸Šç´šã®è¾›å£ç™½ãƒ¯ã‚¤ãƒ³ã€‚è¯ã‚„ã‹ã•ã¨ã‚³ã‚¯ã‚’å…¼å‚™ã—ãŸä¸Šè³ªãª1æœ¬',
            'english_wine_name' => 'ROERO ARNEIS VILLATA',
            'years' => '2020',
            'producer' => 'ãƒ´ã‚£ãƒ¼ãƒ†ãƒ»ã‚³ãƒ«ãƒ†',
            'breed' => 'ã‚¢ãƒ«ãƒã‚¤ã‚¹',
            'capacity' => 750
        ],
        // ... ä»–ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
    ];

    // ãƒ†ãƒ¼ãƒ–ãƒ«ã®å­˜åœ¨ç¢ºèª
    $sql = "SHOW TABLES LIKE 'recommend_wines'";
    $result = $dbh->query($sql)->fetchAll();

    // ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆã€ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆ
    if (empty($result)) {
        $sql = "CREATE TABLE recommend_wines (
            id INT AUTO_INCREMENT PRIMARY KEY,
            comment TEXT,
            wine_name VARCHAR(255),
            winery VARCHAR(255),
            wine_type VARCHAR(255),
            wine_image VARCHAR(255),
            wine_country VARCHAR(255),
            wine_url VARCHAR(1000),
            one_word VARCHAR(255),
            english_wine_name VARCHAR(255),
            years VARCHAR(255),
            producer VARCHAR(255),
            breed VARCHAR(255),
            capacity INT
        )";
        $dbh->exec($sql);
    }

    // ãƒ†ãƒ¼ãƒ–ãƒ«ãŒç©ºã‹ã©ã†ã‹ç¢ºèª
    $sql = "SELECT COUNT(*) FROM recommend_wines";
    $count = $dbh->query($sql)->fetchColumn();

    // ãƒ†ãƒ¼ãƒ–ãƒ«ãŒç©ºãªã‚‰ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’æŒ¿å…¥
    if ($count == 0) {
        $sql = "INSERT INTO recommend_wines (comment, wine_name, winery, wine_type, wine_image, wine_country, wine_url, one_word, english_wine_name, years, producer, breed, capacity) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";
        $stmt = $dbh->prepare($sql);
        foreach ($sampleData as $data) {
            $stmt->execute([$data['comment'], $data['wine_name'], $data['winery'], $data['wine_type'], $data['wine_image'], $data['wine_country'], $data['wine_url'], $data['one_word'], $data['english_wine_name'], $data['years'], $data['producer'], $data['breed'], $data['capacity']]);
        }
    }

    // ãƒ‡ãƒ¼ã‚¿ã®å–å¾—
    $sql = "SELECT id, comment, wine_name, winery, wine_type, wine_image, wine_country, wine_url, one_word, english_wine_name, years, producer, breed, capacity FROM recommend_wines";
    $wineData = $dbh->query($sql)->fetchAll(PDO::FETCH_ASSOC);

    // JSONå½¢å¼ã§å‡ºåŠ›
    header('Content-Type: application/json');
    echo json_encode([
        'result' => 'SUCCESS',
        'data' => $wineData
    ], JSON_UNESCAPED_UNICODE);
} catch (PDOException $e) {
    print('Error:' . $e->getMessage());
    die();
}
